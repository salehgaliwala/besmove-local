/*! Thrive Quiz Builder - 2018-01-24
* http://www.thrivethemes.com/
* Copyright (c) 2018 Thrive Themes */

!function(a){"use strict";var b,c,d,e,f,g={".js":[],".json":[],".css":[],".html":[]},h="function"==typeof require?require:null;return e=function(a){var b=new Error("Could not find module '"+a+"'");return b.code="MODULE_NOT_FOUND",b},f=function(a,b,c){var d,e;if("function"==typeof a[b+c])return b+c;for(d=0;e=g[c][d];++d)if("function"==typeof a[b+e])return b+e;return null},b=function(a,d,g,h,i,j){var k,l,m,n,o,p;for(g=g.split("/"),k=g.pop(),"."!==k&&".."!==k||(g.push(k),k="");null!=(l=g.shift());)if(l&&"."!==l&&(".."===l?(a=d.pop(),j=j.slice(0,j.lastIndexOf("/"))):(d.push(a),a=a[l],j+="/"+l),!a))throw e(h);if(k&&"function"!=typeof a[k]&&(p=f(a,k,".js"),p||(p=f(a,k,".json")),p||(p=f(a,k,".css")),p||(p=f(a,k,".html")),p?k=p:2!==i&&"object"==typeof a[k]&&(d.push(a),a=a[k],j+="/"+k,k="")),!k)return 1!==i&&a[":mainpath:"]?b(a,d,a[":mainpath:"],h,1,j):b(a,d,"index",h,2,j);if(!(o=a[k]))throw e(h);return o.hasOwnProperty("module")?o.module.exports:(m={},o.module=n={exports:m,id:j+"/"+k},o.call(m,m,n,c(a,d,j)),n.exports)},d=function(c,d,f,g){var i,j=f,k=f.charAt(0),l=0;if("/"===k){if(j=j.slice(1),!(c=a["/"])){if(h)return h(f);throw e(f)}g="/",d=[]}else if("."!==k){if(i=j.split("/",1)[0],!(c=a[i])){if(h)return h(f);throw e(f)}g=i,d=[],j=j.slice(i.length+1),j||(j=c[":mainpath:"],j?l=1:(j="index",l=2))}return b(c,d,j,f,l,g)},(c=function(a,b,c){return function(e){return d(a,[].concat(b),e,c)}})(a,[],"")}({workspace:{"tcb-bridge":{assets:{js:{external:{"main.js":function(exports,module,require){eval("/**\n * Created by Ovidiu on 6/23/2017.\n */\nvar TVE = window.TVE || {};\n\n(function ( $ ) {\n\t/**\n\t * On TCB Main Ready\n\t */\n\t$( document ).on( 'tcb_main_ready', function () {\n\t\tTVE.Views.Components.quiz = require( '../external/quiz-component' );\n\t} );\n})( jQuery );\n//# sourceURL=workspace/tcb-bridge/assets/js/external/main.js")},"quiz-component.js":function(exports,module,require){eval("/**\n * Created by Ovidiu on 6/23/2017.\n */\n\nvar shortcode_base = TVE.shortcode_manager,\n\tSearchPanel = require( '../external/quiz-search' );\n\nmodule.exports = TVE.Views.Base.component.extend( {\n\tcontrols_init: function () {\n\t\tvar self = this;\n\n\t\tthis.controls['change_quiz'].update = function ( $element ) {\n\t\t\tvar _config = self.get_config();\n\n\t\t\tthis.setValue( _config['quiz_id'] );\n\t\t};\n\n\t\tthis.controls['change_quiz'].input = function ( $element, dom ) {\n\t\t\tTVE.main.trigger( 'insert_quiz', dom.value );\n\t\t};\n\n\n\t\tthis.placeholder_panel = new SearchPanel( {\n\t\t\tcomponent: this,\n\t\t\tminWidth: 250,\n\t\t\tno_buttons: true\n\t\t} );\n\n\t\tTVE.main.on( 'insert_quiz', function ( quiz_id ) {\n\n\t\t\tself.quiz_ajax( {\n\t\t\t\tquiz_id: quiz_id\n\t\t\t} ).done( function ( response ) {\n\t\t\t\tif ( response ) {\n\t\t\t\t\tTVE.ActiveElement.html( response ).removeClass( 'tcb-row-empty tcb-elem-placeholder' );\n\t\t\t\t\tTVE.ActiveElement.trigger( 'click' );\n\t\t\t\t}\n\n\t\t\t\tTVE.main.overlay( 'close' );\n\t\t\t} );\n\t\t} );\n\t},\n\tplaceholder_action: function () {\n\t\tthis.placeholder_panel.open( TVE.ActiveElement, TVE.ActiveElement.find( '.tcb-inline-placeholder-action' ) )\n\t},\n\n\t/**\n\t * Returns Quiz Shortcode Settings\n\t *\n\t * @returns {*}\n\t */\n\tget_config: function () {\n\t\tvar shortcode_config = shortcode_base( TVE.ActiveElement.find( '.thrive-shortcode-config' ), 'quiz_shortcode' );\n\n\t\treturn shortcode_config.get();\n\t},\n\n\t/**\n\t * Executes an ajax request that returns the HTML code for displaying the quiz\n\t *\n\t * @param data\n\t * @param ajax_param\n\t */\n\tquiz_ajax: function ( data, ajax_param ) {\n\t\tvar params = {\n\t\t\ttype: 'post',\n\t\t\tdataType: 'json',\n\t\t\turl: tqb_page_data.ajaxurl\n\t\t};\n\t\tTVE.main.overlay();\n\t\tdata.action = 'tqb_frontend_ajax_controller';\n\t\tdata.route = 'shortcode';\n\t\tdata.tqb_in_tcb_editor = 'inside_tcb';\n\t\tdata._nonce = tqb_page_data.security;\n\t\tparams.data = data;\n\n\t\tif ( ajax_param ) {\n\t\t\tfor ( var k in ajax_param ) {\n\t\t\t\tparams[k] = ajax_param[k];\n\t\t\t}\n\t\t}\n\n\t\treturn jQuery.ajax( params, data );\n\t}\n} );\n//# sourceURL=workspace/tcb-bridge/assets/js/external/quiz-component.js")},"quiz-search.js":function(exports,module,require){eval("/**\n * Created by Ovidiu on 6/23/2017.\n */\n\n(function ( $ ) {\n\tmodule.exports = TVE.Views.InlinePanel.extend( {\n\t\ttemplate: TVE.tpl( 'inline/content-templates' ),\n\t\tafter_initialize: function () {\n\t\t\tthis.$( '.drop-panel' ).addClass( 'small-pad tcb-autocomplete' );\n\t\t\tthis.autocomplete();\n\t\t},\n\t\tautocomplete: function () {\n\t\t\tthis.$input = this.$( '.tcb-search' ).autocomplete( {\n\t\t\t\tminLength: 0,\n\t\t\t\tsource: function ( request, response ) {\n\t\t\t\t\tvar results = $.ui.autocomplete.filter( tqb_page_data.quizzes, request.term );\n\n\t\t\t\t\tresponse( results.slice( 0, 5 ) );\n\t\t\t\t},\n\t\t\t\tappendTo: this.$( '.popup-content' ),\n\t\t\t\tselect: function ( e, ui ) {\n\t\t\t\t\tTVE.main.trigger( 'insert_quiz', ui.item.id );\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tthis.$input.data( 'ui-autocomplete' )._renderItem = function ( ul, item ) {\n\t\t\t\tul.addClass( 'tcb-suggest' );\n\t\t\t\tvar r = new RegExp( this.term, 'i' ),\n\t\t\t\t\tli = $( '<li></li>' ).data( 'item.autocomplete', item )\n\t\t\t\t\t                     .append( '<a href=\"#\" class=\"tcb-truncate\">' + item.label.replace( r, '<span class=\"highlight\">' + this.term + '</span>' ) + '</a>' )\n\t\t\t\t\t                     .appendTo( ul );\n\t\t\t\treturn li;\n\t\t\t};\n\t\t},\n\t\tonOpen: function () {\n\t\t\tthis.$input.val( '' ).focus().autocomplete( 'search' );\n\t\t}\n\t} );\n})( jQuery );\n//# sourceURL=workspace/tcb-bridge/assets/js/external/quiz-search.js")}}}}}}})("workspace/tcb-bridge/assets/js/external/main");